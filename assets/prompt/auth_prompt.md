我需要你使用 python 3.12 帮我编写一个登录认证功能的后端服务，名为：auth。提供如下restult API接口：

1. 用户注册
  - 描述：简易的用户注册功能
  - 入参：username, passwd
  - 返回：成功或失败
  - 处理逻辑：用户输入用户名、密码，系统检测用户是否存在，如果存在则注册失败。否则注册成功。并将用户输入的信息存储到数据库。
2. 用户登录
  - 描述：用户登录功能
  - 入参：username, passwd
  - 返回：token
  - 处理逻辑：用户输入用户名、密码，系统检测用户名、密码是否一致，如果不一致则登录失败。登录成功则生成token并返回。
3. 用户登出
  - 描述：用户出功能
  - 入参：token(request header)
  - 返回：成功或失败
  - 处理逻辑：仅对已登录的用户进行登出操作，并且销毁token

技术要求：
1. 以微服务形式，使用python 3.12、flask开发
2. 使用mongodb 8.0.3作为数据库
3. 代码生成在./apps/auth目录内
4. 服务启动后们需要注册到mDNS内，以便后续的其他服务能够找到它，并可通过restful调用它。
5. 书写详细的设计文档，包括数据流程，到readme.md内
